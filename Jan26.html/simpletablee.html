<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Book Table with Search, Sort & Pagination</title>
<style>
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }

    input {
        padding: 8px;
        width: 300px;
        margin-bottom: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
    }

    th, td {
        border: 1px solid #ccc;
        padding: 8px;
        text-align: left;
    }

    th {
        cursor: pointer;
        background: #f4f4f4;
    }

    th span {
        margin-left: 5px;
    }

    .pagination {
        margin-top: 10px;
    }

    button {
        padding: 6px 12px;
        margin: 2px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h2>ðŸ“š Book Details</h2>

<input type="text" id="searchInput" placeholder="Search books..." />

<table>
    <thead>
        <tr>
            <th onclick="sortTable('id')">ID <span id="id"></span></th>
            <th onclick="sortTable('title')">Title <span id="title"></span></th>
            <th onclick="sortTable('author')">Author <span id="author"></span></th>
            <th onclick="sortTable('price')">Price <span id="price"></span></th>
        </tr>
    </thead>
    <tbody id="tableBody"></tbody>
</table>

<div class="pagination">
    <button onclick="prevPage()">Prev</button>
    <span id="pageInfo"></span>
    <button onclick="nextPage()">Next</button>
</div>

<script>
const books = Array.from({ length: 50 }, (_, i) => ({
    id: i + 1,
    title: "Book " + (i + 1),
    author: "Author " + ((i % 5) + 1),
    price: Math.floor(Math.random() * 500) + 100
}));

let currentPage = 1;
const rowsPerPage = 10;
let currentSort = { key: null, direction: "asc" };
let filteredBooks = [...books];

function displayTable() {
    const tbody = document.getElementById("tableBody");
    tbody.innerHTML = "";

    const start = (currentPage - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    const pageData = filteredBooks.slice(start, end);

    pageData.forEach(book => {
        const row = `
            <tr>
                <td>${book.id}</td>
                <td>${book.title}</td>
                <td>${book.author}</td>
                <td>${book.price}</td>
            </tr>
        `;
        tbody.innerHTML += row;
    });

    document.getElementById("pageInfo").textContent =
        Page ${currentPage} of ${Math.ceil(filteredBooks.length / rowsPerPage)};
}

function sortTable(key) {
    const arrows = document.querySelectorAll("th span");
    arrows.forEach(a => a.textContent = "");

    currentSort.direction =
        currentSort.key === key && currentSort.direction === "asc"
            ? "desc"
            : "asc";

    currentSort.key = key;

    filteredBooks.sort((a, b) => {
        if (a[key] < b[key]) return currentSort.direction === "asc" ? -1 : 1;
        if (a[key] > b[key]) return currentSort.direction === "asc" ? 1 : -1;
        return 0;
    });

    document.getElementById(key).textContent =
        currentSort.direction === "asc" ? "â¬†ï¸" : "â¬‡ï¸";

    currentPage = 1;
    displayTable();
}

document.getElementById("searchInput").addEventListener("input", function () {
    const query = this.value.toLowerCase();

    filteredBooks = books.filter(book =>
        Object.values(book).some(value =>
            value.toString().toLowerCase().includes(query)
        )
    );

    currentPage = 1;
    displayTable();
});

function prevPage() {
    if (currentPage > 1) {
        currentPage--;
        displayTable();
    }
}

function nextPage() {
    if (currentPage < Math.ceil(filteredBooks.length / rowsPerPage)) {
        currentPage++;
        displayTable();
    }
}

displayTable();
</script>

</body>
</html>